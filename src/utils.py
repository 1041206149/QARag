"""工具函数模块提供文本处理等通用功能注意：日志配置已移至 config.config_manager 模块统一管理"""import jsonfrom pathlib import Pathfrom typing import List, Anydef truncate_text(text: str, max_length: int = 100, suffix: str = "...") -> str:    """    截断文本到指定长度    Args:        text: 原始文本        max_length: 最大长度        suffix: 后缀    Returns:        截断后的文本    """    if len(text) <= max_length:        return text    return text[:max_length] + suffixdef format_file_size(size_bytes: int) -> str:    """    格式化文件大小    Args:        size_bytes: 字节数    Returns:        格式化后的大小字符串    """    for unit in ['B', 'KB', 'MB', 'GB']:        if size_bytes < 1024.0:            return f"{size_bytes:.2f} {unit}"        size_bytes /= 1024.0    return f"{size_bytes:.2f} TB"def save_json(data: Any, file_path: str, indent: int = 2, ensure_ascii: bool = False):    """    保存数据为JSON文件    Args:        data: 要保存的数据        file_path: 文件路径        indent: 缩进空格数        ensure_ascii: 是否转义非ASCII字符    """    file_path = Path(file_path)    file_path.parent.mkdir(parents=True, exist_ok=True)    with open(file_path, 'w', encoding='utf-8') as f:        json.dump(data, f, indent=indent, ensure_ascii=ensure_ascii)def load_json(file_path: str) -> Any:    """    加载JSON文件    Args:        file_path: 文件路径    Returns:        解析后的数据    """    with open(file_path, 'r', encoding='utf-8') as f:        return json.load(f)def get_project_root() -> Path:    """    获取项目根目录    Returns:        项目根目录路径    """    return Path(__file__).parent.parentdef ensure_dir(directory: str) -> Path:    """    确保目录存在，不存在则创建    Args:        directory: 目录路径    Returns:        目录Path对象    """    dir_path = Path(directory)    dir_path.mkdir(parents=True, exist_ok=True)    return dir_pathdef count_tokens_approximate(text: str) -> int:    """    近似计算文本的token数量（简单估算）    Args:        text: 文本内容    Returns:        估算的token数量    """    # 简单估算：中文约1个字1个token，英文约4个字符1个token    chinese_chars = sum(1 for c in text if '\u4e00' <= c <= '\u9fff')    other_chars = len(text) - chinese_chars    return chinese_chars + other_chars // 4def highlight_text(text: str, keywords: List[str]) -> str:    """    高亮文本中的关键词（用于终端显示）    Args:        text: 原始文本        keywords: 关键词列表    Returns:        高亮后的文本    """    for keyword in keywords:        if keyword in text:            text = text.replace(keyword, f"\033[1;33m{keyword}\033[0m")    return textdef calculate_similarity_score(score: float) -> str:    """    根据相似度分数返回描述性文本    Args:        score: 相似度分数 (0-1)    Returns:        描述性文本    """    if score >= 0.9:        return "非常相关"    elif score >= 0.8:        return "高度相关"    elif score >= 0.7:        return "相关"    elif score >= 0.6:        return "可能相关"    else:        return "弱相关"